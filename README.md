# FinFET Circuit Design and Characterization Workshop

<img width="1199" height="584" alt="image" src="https://github.com/user-attachments/assets/be5eec19-3858-467f-9210-e7e083e8d67a" />

-----------------------------------------------------------------------------

## Overview:

FinFET Circuit Design and Characterization is a hands-on workshop for advanced-node skills. Built directly on open repositories with the ASAP7 (7 nm) predictive platform, you will work in Xschem and Ngspice using BSIM-CMG device models. The curriculum follows an industry-aligned loop: design, simulate, verify, document — emphasizing credible methods, reproducible datasets, and trusted figures that meet international expectations for research and product teams.

 

You will begin at the device level with NFET and PFET characterization, extracting complete I-V families, transconductance (gm), output resistance (ro), and practical bias points. You will then construct an inverter, generate and interpret its voltage transfer characteristic (VTC), and quantify switching point, noise margins, and static current. Each lab includes sensible sweep ranges, pre-checked netlists, and measurement recipes so you can focus on learning rather than tool friction. Results are archived for traceability.

 

The program then extends to a precision bandgap reference at 7 nm, guided by instructor-supplied schematics and netlists aligned with the repository’s figures. You will reproduce and analyze reference plots — temperature stability, line and load regulation, output resistance, and startup behavior — while learning repeatable techniques for biasing and compensation. Automated supply and temperature sweeps, optional PVT corners, and Monte Carlo mismatch runs help you benchmark outcomes against published literature and communicate confidence in your results.

 

Graduates leave with a coherent portfolio: annotated netlists, verified waveforms, tables, and engineering narratives that demonstrate readiness for advanced-node roles. We include templates, checklists, and scripts to accelerate future projects, plus guidance on documenting methods for submission or engineering reviews. Whether you are targeting graduate research, analog or ASIC design, or high-impact internships, this workshop equips you with practical 7 nm experience and evidence of competence that travels globally.

------------------------------------------------------------------------------

## Scaling Beyond CMOS: FinFET Devices and Innovations
<details>
<summary>Scaling Beyond CMOS: FinFET Devices and Innovations</summary>

&nbsp;
### 0. Path To Zetta Scale Computing
&nbsp;
<img width="1447" height="813" alt="image" src="https://github.com/user-attachments/assets/b226f7f9-6b2c-41df-91f2-a895b32da365" />

&nbsp;
<img width="1448" height="811" alt="image" src="https://github.com/user-attachments/assets/18249d1c-24e3-4428-955b-2953345e12fc" />

&nbsp;
<img width="1449" height="808" alt="image" src="https://github.com/user-attachments/assets/cb822405-bea9-425d-81f7-52a4a269cdc2" />

&nbsp;
<img width="1450" height="812" alt="image" src="https://github.com/user-attachments/assets/9b70f99a-5041-4204-8b30-b95662ebcbfa" />

&nbsp;
<img width="1451" height="810" alt="image" src="https://github.com/user-attachments/assets/057b6cde-114a-41b1-ba71-b17f5e24d169" />


&nbsp;
### 1. CMOS Evolution And Next-Gen Candidates
&nbsp;

<img width="1451" height="812" alt="image" src="https://github.com/user-attachments/assets/cbaca5b1-4cf9-40f6-93a2-2f75c0f07a4d" />


&nbsp;
### 2. Introduction To FinFETs
&nbsp;

<img width="1452" height="813" alt="image" src="https://github.com/user-attachments/assets/8fbde027-a528-473e-98c4-287c2715388f" />


<img width="1451" height="813" alt="image" src="https://github.com/user-attachments/assets/aa1efd1c-78a4-4368-906c-23e4e372788c" />


<img width="1448" height="811" alt="image" src="https://github.com/user-attachments/assets/91e0a730-fbf5-4721-ab4c-96a01ca538d1" />

&nbsp;
### 3. CMOS Technology Inflection Points
&nbsp;
<img width="1452" height="807" alt="image" src="https://github.com/user-attachments/assets/60cc2cd2-ddd8-4b19-849c-6f6265e2ba81" />


<img width="1448" height="808" alt="image" src="https://github.com/user-attachments/assets/b32d6203-0d72-4673-886b-ff7caa96a59e" />


&nbsp;
### 4. Standard Cell Area Scaling And Variability
&nbsp;


<img width="1451" height="807" alt="image" src="https://github.com/user-attachments/assets/5dcebf22-0c39-4201-8e3c-2f4f0a412ee4" />


<img width="1447" height="804" alt="image" src="https://github.com/user-attachments/assets/4996e2bd-aa42-4a61-92e1-259edad082ca" />


<img width="1450" height="799" alt="image" src="https://github.com/user-attachments/assets/11b40553-a24e-468f-9207-43096b94febe" />

&nbsp;
### 5. Parasitics Resistance And Capacitance
&nbsp;
<img width="1451" height="804" alt="image" src="https://github.com/user-attachments/assets/defe1527-4027-40c0-a17e-09af2c17f864" />


<img width="1451" height="804" alt="image" src="https://github.com/user-attachments/assets/e027474d-12db-4dbe-9b56-2613a1308fe9" />


<img width="1450" height="804" alt="image" src="https://github.com/user-attachments/assets/c5a4f5f4-5ca1-4373-8ad6-66090d44741b" />

&nbsp;
### 6. Device Scaling And Electrical Characteristics
&nbsp;

<img width="1450" height="804" alt="image" src="https://github.com/user-attachments/assets/7607448b-1399-49b5-a7e2-23796beb22e5" />


<img width="1448" height="803" alt="image" src="https://github.com/user-attachments/assets/9df2fbaa-5650-4fc0-9c80-4c8c4fc6c0aa" />


<img width="1452" height="804" alt="image" src="https://github.com/user-attachments/assets/a52b074b-42d7-4375-90dd-5eb10e737b70" />


<img width="1449" height="807" alt="image" src="https://github.com/user-attachments/assets/07de2558-d0be-40fd-8b37-849744fa3501" />


<img width="1451" height="803" alt="image" src="https://github.com/user-attachments/assets/fca1127c-5bce-4dfa-90a0-0c87ebafe051" />


<img width="1452" height="801" alt="image" src="https://github.com/user-attachments/assets/75ba0243-b720-4130-b4ef-6d173991ae49" />


<img width="1448" height="805" alt="image" src="https://github.com/user-attachments/assets/f7290e57-4a01-4dc3-968b-e6f71213d4aa" />

&nbsp;
### 7. 3D-Structures
&nbsp;

<img width="1450" height="804" alt="image" src="https://github.com/user-attachments/assets/7a5bdb5c-60b9-4ad8-a7c0-2399274fe17f" />


<img width="1450" height="804" alt="image" src="https://github.com/user-attachments/assets/cdffeca0-bf10-4bff-8160-0bb1ed8b06a1" />


<img width="1450" height="802" alt="image" src="https://github.com/user-attachments/assets/7821b108-0f6e-4a36-8616-d491eab36a18" />


<img width="1450" height="804" alt="image" src="https://github.com/user-attachments/assets/027d8dfc-07b3-4fb1-aa73-99694812cc75" />


<img width="1449" height="809" alt="image" src="https://github.com/user-attachments/assets/db667d29-1956-4563-b6fe-283e287bf6fe" />


<img width="1447" height="805" alt="image" src="https://github.com/user-attachments/assets/521bdaac-c552-4b58-b2e0-e23a92194ee6" />

&nbsp;
### 8. BOEL Innovations
&nbsp;

<img width="1450" height="801" alt="image" src="https://github.com/user-attachments/assets/a1e74bae-ee21-4c12-a318-58ce212cdd9c" />


<img width="1451" height="803" alt="image" src="https://github.com/user-attachments/assets/0145b8a5-eccc-4f2d-9b20-8ec308c0e949" />


<img width="1455" height="807" alt="image" src="https://github.com/user-attachments/assets/2999c726-e3cc-4831-a1bd-031ad33806c5" />


<img width="1449" height="806" alt="image" src="https://github.com/user-attachments/assets/5752f7fd-7ac2-4817-a0af-19e06d2d729d" />


<img width="1450" height="803" alt="image" src="https://github.com/user-attachments/assets/db766ccc-8621-4363-8fee-1c4a732f76be" />


</details>

---------------------------------------------------------------------------------
## Lab-to-Simulation: 7nm FinFET Inverter Performance Analysis
<details>
<summary>Lab-to-Simulation: 7nm FinFET Inverter Performance Analysis</summary>

&nbsp;
### 9. First NFET Characteristics Using 7nm PDKs
&nbsp;

Lets understand FinFET's, why they are used and plot characteristsics.
The NFET spice file we are using to plot characteristic is "nfet_char.spice"

You find it in VDI under ~Desktop/asap_7nm_Xschem.

``` cmd
vsduser@vsduser:~/Desktop/asap_7nm_Xschem$ pwd
/home/vsduser/Desktop/asap_7nm_Xschem
vsduser@vsduser:~/Desktop/asap_7nm_Xschem$ ls
asap_7nm_nfet.sym  bsimcmg.osdi         inverter_finfet.spice  inverter_vtc.sch    nfet_char.sch    README.md
asap_7nm_pfet.sym  inverter_finfet.sch  inverter_vtc2.spice    inverter_vtc.spice  nfet_char.spice
vsduser@vsduser:~/Desktop/asap_7nm_Xschem$ 

```

<img width="1029" height="136" alt="image" src="https://github.com/user-attachments/assets/6d2ea202-aa4e-4633-8d21-c19e5ff3d525" />

&nbsp;
##### spice files we are using: **nfet_char.spice**
&nbsp;

``` spice
** sch_path: /home/hprcse/Finfet/nfet_char.sch
**.subckt nfet_char
V1 nfet_in GND 0
V2 vdd GND 3
R1 vdd nfet_out 1k m=1
Xnfet2 nfet_out nfet_in GND GND asap_7nm_nfet l=7e-009 nfin=14
**** begin user architecture code


.dc v1 0 0.7 1m v2 0 0.7 0.2
.control
run
set xbrushwidth=3
let vd = vdd - nfet_out
let id  = vd/1000
plot id
.endc


**** end user architecture code
**.ends
.GLOBAL GND
**** begin user architecture code

.subckt asap_7nm_nfet S G D B l=7e-009 nfin=14
	nnmos_finfet S G D B BSIMCMG_osdi_N l=7e-009 nfin=14
.ends asap_7nm_nfet

.model BSIMCMG_osdi_N BSIMCMG_va (
+ TYPE = 1
************************************************************
*                         general                          *
************************************************************
+version = 107             bulkmod = 1               igcmod  = 1               igbmod  = 0
+gidlmod = 1               iimod   = 0               geomod  = 1               rdsmod  = 0
+rgatemod= 0               rgeomod = 0               shmod   = 0               nqsmod  = 0
+coremod = 0               cgeomod = 0               capmod  = 0               tnom    = 25
+eot     = 1e-009          eotbox  = 1.4e-007        eotacc  = 1e-010          tfin    = 6.5e-009
+toxp    = 2.1e-009        nbody   = 1e+022          phig    = 4.2466          epsrox  = 3.9
+epsrsub = 11.9            easub   = 4.05            ni0sub  = 1.1e+016        bg0sub  = 1.17
+nc0sub  = 2.86e+025       nsd     = 2e+026          ngate   = 0               nseg    = 5
+l       = 2.1e-008        xl      = 1e-009          lint    = -2e-009         dlc     = 0
+dlbin   = 0               hfin    = 3.2e-008        deltaw  = 0               deltawcv= 0
+sdterm  = 0               epsrsp  = 3.9             nfin    = 1
+toxg    = 1.80e-009
************************************************************
*                            dc                            *
************************************************************
+cit     = 0               cdsc    = 0.01            cdscd   = 0.01            dvt0    = 0.05
+dvt1    = 0.47            phin    = 0.05            eta0    = 0.07            dsub    = 0.35
+k1rsce  = 0               lpe0    = 0               dvtshift= 0               qmfactor= 2.5
+etaqm   = 0.54            qm0     = 0.001           pqm     = 0.66            u0      = 0.0303
+etamob  = 2               up      = 0               ua      = 0.55            eu      = 1.2
+ud      = 0               ucs     = 1               rdswmin = 0               rdsw    = 200
+wr      = 1               rswmin  = 0               rdwmin  = 0               rshs    = 0
+rshd    = 0               vsat    = 70000           deltavsat= 0.2             ksativ  = 2
+mexp    = 4               ptwg    = 30              pclm    = 0.05            pclmg   = 0
+pdibl1  = 0               pdibl2  = 0.002           drout   = 1               pvag    = 0
+fpitch  = 2.7e-008        rth0    = 0.225           cth0    = 1.243e-006      wth0    = 2.6e-007
+lcdscd  = 5e-005          lcdscdr = 5e-005          lrdsw   = 0.2             lvsat   = 0
************************************************************
*                         leakage                          *
************************************************************
+aigc    = 0.014           bigc    = 0.005           cigc    = 0.25            dlcigs  = 1e-009
+dlcigd  = 1e-009          aigs    = 0.0115          aigd    = 0.0115          bigs    = 0.00332
+bigd    = 0.00332         cigs    = 0.35            cigd    = 0.35            poxedge = 1.1
+agidl   = 1e-012          agisl   = 1e-012          bgidl   = 10000000        bgisl   = 10000000
+egidl   = 0.35            egisl   = 0.35
************************************************************
*                            rf                            *
************************************************************
************************************************************
*                         junction                         *
************************************************************
************************************************************
*                       capacitance                        *
************************************************************
+cfs     = 0               cfd     = 0               cgso    = 1.6e-010        cgdo    = 1.6e-010
+cgsl    = 0               cgdl    = 0               ckappas = 0.6             ckappad = 0.6
+cgbo    = 0               cgbl    = 0
************************************************************
*                       temperature                        *
************************************************************
+tbgasub = 0.000473        tbgbsub = 636             kt1     = 0               kt1l    = 0
+ute     = -0.7            utl     = 0               ua1     = 0.001032        ud1     = 0
+ucste   = -0.004775       at      = 0.001           ptwgt   = 0.004           tmexp   = 0
+prt     = 0               tgidl   = -0.007          igt     = 2.5
************************************************************
*                          noise                           *
************************************************************
**)
.control
pre_osdi /home/vsduser/Desktop/asap_7nm_Xschem/bsimcmg.osdi
.endc


**** end user architecture code
.end
```
&nbsp;
#### to create characteristics plot run "___ngspice nfet_char.spice___"
&nbsp;
<img width="1359" height="947" alt="image" src="https://github.com/user-attachments/assets/7f6926b3-f729-46c5-aac7-d8f3b5fb20ab" />
&nbsp;

if we ___plot id vs vd___ in **ngspice** we get following graph

&nbsp;
&nbsp;
<img width="1157" height="966" alt="image" src="https://github.com/user-attachments/assets/3852790a-6228-4850-bde2-44fc64aafc28" />
&nbsp;



### 10. First Inverter Characteristics Using 7nm FinFETs
before we start with inverter characteristic we run xschem with nfet characteristic: <ins>**xschem nfet_char.sch**</ins>

#### some useful commands for "**xschem**" handling:
&nbsp;
 | Command|Key-Sequence|
 |:--------|:------------:|
 |Zoom full| F |
 |Redraw screen | ESC |
 |Zoom In | Shift-Z |
 |Zoom Out | Cntrl-Z | 
 |Insert Object | Shift-I|
 |Insert Line | L |
 |Selcet all| Ctrl-A|
 |Save| Ctrl-S|
 |Open| Ctrl-O|
 |Quit| Ctrl-Q|

&nbsp;

<img width="671" height="136" alt="image" src="https://github.com/user-attachments/assets/c298584b-1317-4b16-a475-73c5cada7466" />

&nbsp;

<img width="1192" height="896" alt="image" src="https://github.com/user-attachments/assets/4dfc71e9-96e9-41be-b447-581c777d5244" />

&nbsp;
&nbsp;

let jump now to inverter characteristic. We us following spice file "inverter_vtc_class.spice" with below contens:

``` spice

** sch_path: /home/vsduser/Desktop/asap_7nm_Xschem/inverter_vtc.sch
**.subckt inverter_vtc
Xpfet1 nfet_out nfet_in vdd vdd asap_7nm_pfet l=7e-009 nfin=14
Xnfet1 nfet_out nfet_in GND GND asap_7nm_nfet l=7e-009 nfin=14
V1 nfet_in GND pulse(0 0.7 20p 10p 10p 20p 500p 1)
V2 vdd GND 0.7
**** begin user architecture code


.dc v1 0 0.7 1m
*.tran 1e-12 100e-12

.control
    * First run DC
    dc v1 0 0.7 1m
    run

    * DC measurements
    meas dc v_th when nfet_out = nfet_in
    plot nfet_out nfet_in
    
    let gain_av = abs(deriv(nfet_out))
    meas dc max_gain max gain_av
    let gain_target = max_gain * 0.999
    meas dc vil find nfet_in when gain_av = gain_target cross=1
    meas dc voh find nfet_out when gain_av = gain_target cross=1
    meas dc vih find nfet_in when gain_av = gain_target cross=2
    meas dc vol find nfet_out when gain_av = gain_target cross=2
    let nmh = voh - vih
    let nml = vil - vol
    print v_th max_gain vil voh vih vol nmh nml
    
    *Transconductance
    
    let id = v2#branch
    let gm = real(deriv(id, nfet_in))
    meas dc gm_max MAX gm
    plot gm
    let r_out= deriv(nfet_out,id)
    plot r_out
    plot id
    
    * Transient measurements
    tran 1e-12 100e-12
    meas tran tpr when nfet_in = 0.35 rise = 1
    meas tran tpf when nfet_out = 0.35 fall = 1
    let tp = (tpr + tpf) / 2
    let trans_current = v2#branch
    meas tran id_pwr integ trans_current from=2e-11 to=6e-11
    let pwr = id_pwr * 0.7
    let power = abs(pwr / 40e-12)
    print tpr tpf tp id_pwr pwr power
  
    tran 0.1 100p                         
    meas tran tr when nfet_in=0.07 RISE=1  
    meas tran tf when nfet_out=0.63 FALL=1 
    let t_delay = tr + tf                  
    print t_delay                         
    let f = 1/t_delay                     
    print f                              

    

.endc




**** end user architecture code
**.ends
.GLOBAL GND
**** begin user architecture code

.subckt asap_7nm_pfet S G D B l=7e-009 nfin=14
	npmos_finfet S G D B BSIMCMG_osdi_P l=7e-009 nfin=14
.ends asap_7nm_pfet

.model BSIMCMG_osdi_P BSIMCMG_va (
+ TYPE = 0

************************************************************
*                         general                          *
************************************************************
+version = 107             bulkmod = 1               igcmod  = 1               igbmod  = 0
+gidlmod = 1               iimod   = 0               geomod  = 1               rdsmod  = 0
+rgatemod= 0               rgeomod = 0               shmod   = 0               nqsmod  = 0
+coremod = 0               cgeomod = 0               capmod  = 0               tnom    = 25
+eot     = 1e-009          eotbox  = 1.4e-007        eotacc  = 3e-010          tfin    = 6.5e-009
+toxp    = 2.1e-009        nbody   = 1e+022          phig    = 4.9278          epsrox  = 3.9
+epsrsub = 11.9            easub   = 4.05            ni0sub  = 1.1e+016        bg0sub  = 1.17
+nc0sub  = 2.86e+025       nsd     = 2e+026          ngate   = 0               nseg    = 5
+l       = 2.1e-008        xl      = 1e-009          lint    = -2.5e-009       dlc     = 0
+dlbin   = 0               hfin    = 3.2e-008        deltaw  = 0               deltawcv= 0
+sdterm  = 0               epsrsp  = 3.9             nfin    = 1
+toxg    = 1.8e-009
************************************************************
*                            dc                            *
************************************************************
+cit     = 0               cdsc    = 0.003469        cdscd   = 0.001486        dvt0    = 0.05
+dvt1    = 0.36            phin    = 0.05            eta0    = 0.094           dsub    = 0.24
+k1rsce  = 0               lpe0    = 0               dvtshift= 0               qmfactor= 0
+etaqm   = 0.54            qm0     = 2.183e-012      pqm     = 0.66            u0      = 0.0237
+etamob  = 4               up      = 0               ua      = 1.133           eu      = 0.05
+ud      = 0.0105          ucs     = 0.2672          rdswmin = 0               rdsw    = 200
+wr      = 1               rswmin  = 0               rdwmin  = 0               rshs    = 0
+rshd    = 0               vsat    = 60000           deltavsat= 0.17            ksativ  = 1.592
+mexp    = 2.491           ptwg    = 25              pclm    = 0.01            pclmg   = 1
+pdibl1  = 800             pdibl2  = 0.005704        drout   = 4.97            pvag    = 200
+fpitch  = 2.7e-008        rth0    = 0.15            cth0    = 1.243e-006      wth0    = 2.6e-007
+lcdscd  = 0               lcdscdr = 0               lrdsw   = 1.3             lvsat   = 1441
************************************************************
*                         leakage                          *
************************************************************
+aigc    = 0.007           bigc    = 0.0015          cigc    = 1               dlcigs  = 5e-009
+dlcigd  = 5e-009          aigs    = 0.006           aigd    = 0.006           bigs    = 0.001944
+bigd    = 0.001944        cigs    = 1               cigd    = 1               poxedge = 1.152
+agidl   = 2e-012          agisl   = 2e-012          bgidl   = 1.5e+008        bgisl   = 1.5e+008
+egidl   = 1.142           egisl   = 1.142
************************************************************
*                            rf                            *
************************************************************
************************************************************
*                         junction                         *
************************************************************
************************************************************
*                       capacitance                        *
************************************************************
+cfs     = 0               cfd     = 0               cgso    = 1.6e-010        cgdo    = 1.6e-010
+cgsl    = 0               cgdl    = 0               ckappas = 0.6             ckappad = 0.6
+cgbo    = 0               cgbl    = 0
************************************************************
*                       temperature                        *
************************************************************
+tbgasub = 0.000473        tbgbsub = 636             kt1     = 0               kt1l    = 0
+ute     = -1.2            utl     = 0               ua1     = 0.001032        ud1     = 0
+ucste   = -0.004775       at      = 0.001           ptwgt   = 0.004           tmexp   = 0
+prt     = 0               tgidl   = -0.007          igt     = 2.5
************************************************************
*                          noise                           *
************************************************************
**)
.control
pre_osdi /home/vsduser/Desktop/asap_7nm_Xschem/bsimcmg.osdi
.endc



.subckt asap_7nm_nfet S G D B l=7e-009 nfin=14
	nnmos_finfet S G D B BSIMCMG_osdi_N l=7e-009 nfin=14
.ends asap_7nm_nfet

.model BSIMCMG_osdi_N BSIMCMG_va (
+ TYPE = 1
************************************************************
*                         general                          *
************************************************************
+version = 107             bulkmod = 1               igcmod  = 1               igbmod  = 0
+gidlmod = 1               iimod   = 0               geomod  = 1               rdsmod  = 0
+rgatemod= 0               rgeomod = 0               shmod   = 0               nqsmod  = 0
+coremod = 0               cgeomod = 0               capmod  = 0               tnom    = 25
+eot     = 1e-009          eotbox  = 1.4e-007        eotacc  = 1e-010          tfin    = 6.5e-009
+toxp    = 2.1e-009        nbody   = 1e+022          phig    = 4.2466          epsrox  = 3.9
+epsrsub = 11.9            easub   = 4.05            ni0sub  = 1.1e+016        bg0sub  = 1.17
+nc0sub  = 2.86e+025       nsd     = 2e+026          ngate   = 0               nseg    = 5
+l       = 2.1e-008        xl      = 1e-009          lint    = -2e-009         dlc     = 0
+dlbin   = 0               hfin    = 3.2e-008        deltaw  = 0               deltawcv= 0
+sdterm  = 0               epsrsp  = 3.9             nfin    = 1
+toxg    = 1.80e-009
************************************************************
*                            dc                            *
************************************************************
+cit     = 0               cdsc    = 0.01            cdscd   = 0.01            dvt0    = 0.05
+dvt1    = 0.47            phin    = 0.05            eta0    = 0.07            dsub    = 0.35
+k1rsce  = 0               lpe0    = 0               dvtshift= 0               qmfactor= 2.5
+etaqm   = 0.54            qm0     = 0.001           pqm     = 0.66            u0      = 0.0303
+etamob  = 2               up      = 0               ua      = 0.55            eu      = 1.2
+ud      = 0               ucs     = 1               rdswmin = 0               rdsw    = 200
+wr      = 1               rswmin  = 0               rdwmin  = 0               rshs    = 0
+rshd    = 0               vsat    = 70000           deltavsat= 0.2             ksativ  = 2
+mexp    = 4               ptwg    = 30              pclm    = 0.05            pclmg   = 0
+pdibl1  = 0               pdibl2  = 0.002           drout   = 1               pvag    = 0
+fpitch  = 2.7e-008        rth0    = 0.225           cth0    = 1.243e-006      wth0    = 2.6e-007
+lcdscd  = 5e-005          lcdscdr = 5e-005          lrdsw   = 0.2             lvsat   = 0
************************************************************
*                         leakage                          *
************************************************************
+aigc    = 0.014           bigc    = 0.005           cigc    = 0.25            dlcigs  = 1e-009
+dlcigd  = 1e-009          aigs    = 0.0115          aigd    = 0.0115          bigs    = 0.00332
+bigd    = 0.00332         cigs    = 0.35            cigd    = 0.35            poxedge = 1.1
+agidl   = 1e-012          agisl   = 1e-012          bgidl   = 10000000        bgisl   = 10000000
+egidl   = 0.35            egisl   = 0.35
************************************************************
*                            rf                            *
************************************************************
************************************************************
*                         junction                         *
************************************************************
************************************************************
*                       capacitance                        *
************************************************************
+cfs     = 0               cfd     = 0               cgso    = 1.6e-010        cgdo    = 1.6e-010
+cgsl    = 0               cgdl    = 0               ckappas = 0.6             ckappad = 0.6
+cgbo    = 0               cgbl    = 0
************************************************************
*                       temperature                        *
************************************************************
+tbgasub = 0.000473        tbgbsub = 636             kt1     = 0               kt1l    = 0
+ute     = -0.7            utl     = 0               ua1     = 0.001032        ud1     = 0
+ucste   = -0.004775       at      = 0.001           ptwgt   = 0.004           tmexp   = 0
+prt     = 0               tgidl   = -0.007          igt     = 2.5
************************************************************
*                          noise                           *
************************************************************
**)
.control
pre_osdi /home/vsduser/Desktop/asap_7nm_Xschem/bsimcmg.osdi
.endc


**** end user architecture code
.end


```

we do spice simulation with "ngspice inverter_vtc_class.spice" and get al result 4 plots.

- nfet_out vs nfet_in (V_th)
- output resistance
- drain current
- transconductance (Gm)

<img width="1477" height="950" alt="image" src="https://github.com/user-attachments/assets/db21d969-40f8-4e1d-b66a-49cca17ae3ec" />

&nbsp;
&nbsp;
#### Switchine Threshold Voltage (V_tc)

The switching threshold, denoted as V_th, is defined as the point where the input voltage nfet_in equals the output voltage nfet_out. The ratio of the relative driving strengths of the PMOS and NMOS transistors determines this switching threshold. To raise V_th, a larger ratio is needed, which involves widening the PMOS transistor. Conversely, enhancing the strength of the NMOS transistor will shift the switching threshold closer to ground (GND).

Spice command for calculating V_th:
&nbsp;
``` spice
meas dc v_th when nfet_out=nfet_in
```
&nbsp;
cutoff point for Vtc will be at:

x0 = 0.344791, y0 = 0.344768
&nbsp;

<img width="1326" height="957" alt="image" src="https://github.com/user-attachments/assets/0ef03bf1-3e92-402b-824f-81d963b16b02" />

&nbsp;
**ngspice result -> v_th =  3.447862e-01**
&nbsp;

<img width="611" height="223" alt="image" src="https://github.com/user-attachments/assets/0b974a03-9d78-4e20-97bb-61d885f73718" />

&nbsp;

#### Drain Current (Id)

Drain current (𝐼𝐷) is the current that flows from the drain terminal to the source terminal in a field-effect transistor (FET). It is primarily controlled by the voltage applied at the gate terminal, which creates an electric field that modulates the conductivity of the channel between the drain and source. As the gate voltage increases, the channel becomes more conductive, allowing more current to flow from the drain to the source. In the saturation region, the drain current reaches a constant value, independent of the drain-source voltage, while in the triode region, it increases linearly with the drain-source voltage. The drain current is a key parameter in determining the performance of transistors in various applications, such as amplifiers and digital circuits.

Here the drain current is calculated using v2#branch current . We can get this by using display in NGSPICE. The commands that were used to plot Id

```spice
let id=v2#branch
plot id
```

&nbsp;

<img width="1601" height="969" alt="image" src="https://github.com/user-attachments/assets/1b4c4b81-453a-468b-91b9-0a8d7f6ec3ba" />

&nbsp;

#### Propagation Delay (Tp)

The propagation delay of a logic gate e.g. inverter is the difference in time (calculated at 50% of input-output transition), when output switches, after application of input. Rise time (tr) is the time, during transition, when output switches from 10% to 90% of the maximum value. Fall time (tf) is the time, during transition, when output switches from 90% to 10% of the maximum value. Many designs could also prefer 30% to 70% for rise time and 70% to 30% for fall time. It could vary upto different designs.

Spice Commands

``` spice
meas tran tpr when nfet_in=0.35 RISE=1 : Measures the rise time (tpr) when the input voltage reaches 0.35V
meas tran tpf when nfet_out=0.35 FALL=1 : Measures the fall time (tpf) when the output voltage reaches 0.35V. 
let tp = (tpf + tpr)/2 : Calculates the average propagation delay (tp) as the mean of the rise and fall times.
print tp : prints the Propagation Delay
```
&nbsp;

<ins>ngspice output for propagation delay>/ins>

**tpr = 2.500000e-11**

**tpf = 2.560432e-11**

**tp = 2.530216e-11**


&nbsp;

#### Gain (Av)

Gain is defined as Change in output voltage to that of input voltage. Spice Commands to calculate gain

``` spice
let gain_av=deriv(nfet_out) : this gives out negative gain
** to get abs gain we can use

let gain_av=abs(deriv(nfet_out)) : Gives the absolute value of gain.
plot gain
```

&nbsp;

<ins>ngspice output for max gain:</ins>
&nbsp;

**max_gain = 6.428448e+00**

&nbsp;

#### Noise Margins

Noise margin in a CMOS voltage transfer characteristic (VTC) refers to the tolerance a digital circuit has to noise before signal integrity is compromised. It is defined by two key metrics: Noise Margin High (NMH) and Noise Margin Low (NML). NMH is the difference between the minimum output high voltage (VOH) and the minimum input high voltage (VIH) required to recognize a logic high signal. NML is the difference between the maximum output low voltage (VOL) and the maximum input low voltage (VIL) required to recognize a logic low signal. Larger noise margins ensure the circuit is more resistant to voltage fluctuations or noise, maintaining proper logic level detection.

Spice Commands:

``` spice
meas dc vil find nfet_in when nfet_out=gain CROSS=1   : Measures the (vil, the "input low voltage") when (nfet_out) crosses the gain value for the first time (CROSS=1).
meas dc voh find nfet_out when nfet_out=gain CROSS=1  : Measures the (voh, the "output high voltage") at the same crossing point as vil. 
meas dc vih find nfet_in when nfet_out=gain CROSS=2   : Measures the (vih, the "input high voltage") when the output voltage crosses the gain value for the second time (CROSS=2). 
meas dc vol find nfet_out when nfet_out=gain CROSS=2  : Measures the (vol, the "output low voltage") at the second crossing point. This represents the low state of the output.

let nmh=voh-vih                                       : Calculates the noise margin high (nmh)
print nmh                                             : Prints the calculated noise margin high.
let nml=vil-vol                                       : Calculates the noise margin low (nml)
print nml                                             : Prints the calculated noise margin low.
```

<ins>ngspice output for noise margin:</ins>

**vil = 3.488156e-01**

**voh = 3.190767e-01**

**vih = 3.510961e-01**

**vol = 3.044187e-01**

**nmh = -3.20194e-02**

&nbsp;

#### - Transconductance (Gm)

- The transconductance gm of a device is the small‑signal change of the output current per change of the input voltage:
  gm = dIout / dVin.
- Unit: siemens (S) = A/V. Common symbol: gm or g_m. Also called transconductance (or mutual conductance).

Meaning
- gm describes how efficiently a voltage change at the input is converted into a current change at the output. It is a key parameter for the gain behavior and bandwidth of amplifier circuits.

Formulas for typical devices
- BJT (collector/emitter current Ic, thermal voltage VT ≈ 25.85 mV at 25 °C):
  gm ≈ Ic / VT.
  Example: Ic = 1 mA → gm ≈ 0.001 / 0.02585 ≈ 0.0387 S = 38.7 mS.
- MOSFET (saturation region, overdrive Vov = Vgs − Vth):
  Approximation: gm ≈ 2·Id / Vov.
  Alternatively (ideal square‑law): gm = √(2 μ·Cox·(W/L)·Id).
  Example: Id = 1 mA, Vov = 0.2 V → gm ≈ 2·0.001 / 0.2 = 0.01 S = 10 mS.

Small‑signal models
- BJT (hybrid‑π): small‑signal current source gm·vπ between collector and emitter; input resistance rπ ≈ β / gm.
- MOSFET: small‑signal current source gm·vgs between drain and source; gate is effectively a high‑impedance input.

Effect on gain
- In a simple amplifier with load resistance RL, the voltage gain is approximately A_v ≈ −gm·(RL || r_o) (sign depends on circuit topology).
- Higher gm → higher open‑loop gain and often larger bandwidth, but also stronger dependence on bias current and temperature.

Practical notes
- gm depends on the operating point (bias current or Vgs/Vbe) and on temperature.
- In integrated circuits the specific transconductance k′ = μ·Cox is often used.
- For more accurate calculations additional effects must be considered (e.g., channel‑length modulation r_o for MOSFETs, nonlinearities).

One‑sentence summary
- Transconductance = small‑signal current change per input voltage change (gm = dI/dV), a central parameter for a transistor’s ability to amplify.

Spice commands

``` spice
let gm = real(deriv(id, nfet_in)) : Calculates the transconductance (gm) as the derivative of the branch current with respect to the input voltage.
meas dc gm_max MAX gm: Measures the maximum transconductance (gm_max).
plot gm
```

&nbsp;

<ins>ngspice output for max transcudacdance:</ins>

**gm_max              =  1.235805e-03 at=  4.250000e-01**

&nbsp;

<img width="973" height="756" alt="image" src="https://github.com/user-attachments/assets/667a4093-2903-49c1-878d-eb8feba976be" />

&nbsp;

#### - Frequency (f)

In this case, the maximum signal frequency was calculated, using delay time. As disscussed above about rise time (tr) and fall time (tf). So the frequency would be 1/(tr+tf) Spice commands used for this :

``` spice
tran 0.1 100p                          : Performs a transient analysis with a time step of 0.1ns and a total simulation time of 100ps.
meas tran tr when nfet_in=0.07 RISE=1  : Measures the rise time (tr) when the input voltage reaches 0.07V.
meas tran tf when nfet_out=0.63 FALL=1 : Measures the fall time (tf) when the output voltage reaches 0.63V.
let t_delay = tr + tf                  : Calculates the total delay time as the sum of rise and fall times.
print t_delay                          : Prints the total delay time.
let f = 1/t_delay                      : Calculates the frequency (f) as the reciprocal of the total delay time.
print f                                : Prints the frequency.

```

&nbsp;

<ins>ngspice output for frequency:</ins>

**tr                  =  2.100000e-11**

**tf                  =  2.351715e-11**

**t_delay = 4.451715e-11**

**f = 2.246325e+10**

&nbsp;

#### - Output Resistance

The output resistance is defined as the ratio of output node voltage and the change in drain current. So here we are taking derivative of output voltage and derivative of the drain current. Spice commands:

``` spice
let r_out= deriv(nfet_out,id)   : Calculates the output resistance by taking the derivative of the output voltage with respect to the branch current.
plot r_out                      : Plots the output resistance.
```

&nbsp;

<img width="1460" height="853" alt="image" src="https://github.com/user-attachments/assets/05785c84-7161-4bc6-8cf9-790af66eaa1d" />

&nbsp;

#### - Schematic of inverter

&nbsp;

<ins>**run "xschem inverter_vtc.sch"**</ins>

&nbsp;

<img width="1144" height="817" alt="image" src="https://github.com/user-attachments/assets/24725245-3227-403e-8a37-055b9e01eee8" />

&nbsp;





### 11. Inverter Spice Deck And Characteristics Modelling


### 12. W/L Ratio, Vt, Power Consumption. Prop Delay, Gain And Noise Margin


### 13. Transconductance, Frequency And Inverter Characteristics Table Assignment


### 14. Lab Tips To Calculate Switching Threshold, Drain Current And Power


### 15. Lab Tips To Calculate Prop Delay, Transconductance and Frequency


### 16. Assignment


ASCII-Sum for "Gerhard" :

G = 71
e = 101
r = 114
h = 104
a = 97
r = 114
d = 100

Sum = 71 + 101 + 114 + 104 + 97 + 114 + 100 = 701

so we use 701mV in spice file.

reference W/L 14/7 for pmos & nmos

using 701mV. based on my name i get following values and plot using 14/7 (W/L Ration = 2) for pmos & nmos

using blow spice file:

``` spice


** sch_path: /home/vsduser/Desktop/asap_7nm_Xschem/inverter_vtc.sch
**.subckt inverter_vtc
Xpfet1 nfet_out nfet_in vdd vdd asap_7nm_pfet l=7e-009 nfin=14
Xnfet1 nfet_out nfet_in GND GND asap_7nm_nfet l=7e-009 nfin=14
V1 nfet_in GND pulse(0 0.701 20p 10p 10p 20p 500p 1)
V2 vdd GND 0.701
**** begin user architecture code


.dc v1 0 0.701 1m
*.tran 1e-12 100e-12

.control
    * First run DC
   dc v1 0 0.701 1m
    run

    * DC measurements
    meas dc v_th when nfet_out = nfet_in
    plot nfet_out nfet_in
    
    let gain_av = abs(deriv(nfet_out))
    meas dc max_gain max gain_av
    let gain_target = max_gain * 0.999
    meas dc vil find nfet_in when gain_av = gain_target cross=1
    meas dc voh find nfet_out when gain_av = gain_target cross=1
    meas dc vih find nfet_in when gain_av = gain_target cross=2
    meas dc vol find nfet_out when gain_av = gain_target cross=2
    let nmh = voh - vih
    let nml = vil - vol
    print v_th max_gain vil voh vih vol nmh nml
    
    *Transconductance
    
    let id = v2#branch
    let gm = real(deriv(id, nfet_in))
    meas dc gm_max MAX gm
    plot gm
    let r_out= deriv(nfet_out,id)
    plot r_out
    plot id
    
    * Transient measurements
    tran 1e-12 100e-12
    meas tran tpr when nfet_in = 0.35 rise = 1
    meas tran tpf when nfet_out = 0.35 fall = 1
    let tp = (tpr + tpf) / 2
    let trans_current = v2#branch
    meas tran id_pwr integ trans_current from=2e-11 to=6e-11
    let pwr = id_pwr * 0.7
    let power = abs(pwr / 40e-12)
    print tpr tpf tp id_pwr pwr power
  
    tran 0.1 100p                         
    meas tran tr when nfet_in=0.07 RISE=1  
    meas tran tf when nfet_out=0.63 FALL=1 
    let t_delay = tr + tf                  
    print t_delay                         
    let f = 1/t_delay                     
    print f                              

    

.endc




**** end user architecture code
**.ends
.GLOBAL GND
**** begin user architecture code

.subckt asap_7nm_pfet S G D B l=7e-009 nfin=14
	npmos_finfet S G D B BSIMCMG_osdi_P l=7e-009 nfin=14
.ends asap_7nm_pfet

.model BSIMCMG_osdi_P BSIMCMG_va (
+ TYPE = 0

************************************************************
*                         general                          *
************************************************************
+version = 107             bulkmod = 1               igcmod  = 1               igbmod  = 0
+gidlmod = 1               iimod   = 0               geomod  = 1               rdsmod  = 0
+rgatemod= 0               rgeomod = 0               shmod   = 0               nqsmod  = 0
+coremod = 0               cgeomod = 0               capmod  = 0               tnom    = 25
+eot     = 1e-009          eotbox  = 1.4e-007        eotacc  = 3e-010          tfin    = 6.5e-009
+toxp    = 2.1e-009        nbody   = 1e+022          phig    = 4.9278          epsrox  = 3.9
+epsrsub = 11.9            easub   = 4.05            ni0sub  = 1.1e+016        bg0sub  = 1.17
+nc0sub  = 2.86e+025       nsd     = 2e+026          ngate   = 0               nseg    = 5
+l       = 2.1e-008        xl      = 1e-009          lint    = -2.5e-009       dlc     = 0
+dlbin   = 0               hfin    = 3.2e-008        deltaw  = 0               deltawcv= 0
+sdterm  = 0               epsrsp  = 3.9             nfin    = 1
+toxg    = 1.8e-009
************************************************************
*                            dc                            *
************************************************************
+cit     = 0               cdsc    = 0.003469        cdscd   = 0.001486        dvt0    = 0.05
+dvt1    = 0.36            phin    = 0.05            eta0    = 0.094           dsub    = 0.24
+k1rsce  = 0               lpe0    = 0               dvtshift= 0               qmfactor= 0
+etaqm   = 0.54            qm0     = 2.183e-012      pqm     = 0.66            u0      = 0.0237
+etamob  = 4               up      = 0               ua      = 1.133           eu      = 0.05
+ud      = 0.0105          ucs     = 0.2672          rdswmin = 0               rdsw    = 200
+wr      = 1               rswmin  = 0               rdwmin  = 0               rshs    = 0
+rshd    = 0               vsat    = 60000           deltavsat= 0.17            ksativ  = 1.592
+mexp    = 2.491           ptwg    = 25              pclm    = 0.01            pclmg   = 1
+pdibl1  = 800             pdibl2  = 0.005704        drout   = 4.97            pvag    = 200
+fpitch  = 2.7e-008        rth0    = 0.15            cth0    = 1.243e-006      wth0    = 2.6e-007
+lcdscd  = 0               lcdscdr = 0               lrdsw   = 1.3             lvsat   = 1441
************************************************************
*                         leakage                          *
************************************************************
+aigc    = 0.007           bigc    = 0.0015          cigc    = 1               dlcigs  = 5e-009
+dlcigd  = 5e-009          aigs    = 0.006           aigd    = 0.006           bigs    = 0.001944
+bigd    = 0.001944        cigs    = 1               cigd    = 1               poxedge = 1.152
+agidl   = 2e-012          agisl   = 2e-012          bgidl   = 1.5e+008        bgisl   = 1.5e+008
+egidl   = 1.142           egisl   = 1.142
************************************************************
*                            rf                            *
************************************************************
************************************************************
*                         junction                         *
************************************************************
************************************************************
*                       capacitance                        *
************************************************************
+cfs     = 0               cfd     = 0               cgso    = 1.6e-010        cgdo    = 1.6e-010
+cgsl    = 0               cgdl    = 0               ckappas = 0.6             ckappad = 0.6
+cgbo    = 0               cgbl    = 0
************************************************************
*                       temperature                        *
************************************************************
+tbgasub = 0.000473        tbgbsub = 636             kt1     = 0               kt1l    = 0
+ute     = -1.2            utl     = 0               ua1     = 0.001032        ud1     = 0
+ucste   = -0.004775       at      = 0.001           ptwgt   = 0.004           tmexp   = 0
+prt     = 0               tgidl   = -0.007          igt     = 2.5
************************************************************
*                          noise                           *
************************************************************
**)
.control
pre_osdi /home/vsduser/Desktop/asap_7nm_Xschem/bsimcmg.osdi
.endc



.subckt asap_7nm_nfet S G D B l=7e-009 nfin=14
	nnmos_finfet S G D B BSIMCMG_osdi_N l=7e-009 nfin=14
.ends asap_7nm_nfet

.model BSIMCMG_osdi_N BSIMCMG_va (
+ TYPE = 1
************************************************************
*                         general                          *
************************************************************
+version = 107             bulkmod = 1               igcmod  = 1               igbmod  = 0
+gidlmod = 1               iimod   = 0               geomod  = 1               rdsmod  = 0
+rgatemod= 0               rgeomod = 0               shmod   = 0               nqsmod  = 0
+coremod = 0               cgeomod = 0               capmod  = 0               tnom    = 25
+eot     = 1e-009          eotbox  = 1.4e-007        eotacc  = 1e-010          tfin    = 6.5e-009
+toxp    = 2.1e-009        nbody   = 1e+022          phig    = 4.2466          epsrox  = 3.9
+epsrsub = 11.9            easub   = 4.05            ni0sub  = 1.1e+016        bg0sub  = 1.17
+nc0sub  = 2.86e+025       nsd     = 2e+026          ngate   = 0               nseg    = 5
+l       = 2.1e-008        xl      = 1e-009          lint    = -2e-009         dlc     = 0
+dlbin   = 0               hfin    = 3.2e-008        deltaw  = 0               deltawcv= 0
+sdterm  = 0               epsrsp  = 3.9             nfin    = 1
+toxg    = 1.80e-009
************************************************************
*                            dc                            *
************************************************************
+cit     = 0               cdsc    = 0.01            cdscd   = 0.01            dvt0    = 0.05
+dvt1    = 0.47            phin    = 0.05            eta0    = 0.07            dsub    = 0.35
+k1rsce  = 0               lpe0    = 0               dvtshift= 0               qmfactor= 2.5
+etaqm   = 0.54            qm0     = 0.001           pqm     = 0.66            u0      = 0.0303
+etamob  = 2               up      = 0               ua      = 0.55            eu      = 1.2
+ud      = 0               ucs     = 1               rdswmin = 0               rdsw    = 200
+wr      = 1               rswmin  = 0               rdwmin  = 0               rshs    = 0
+rshd    = 0               vsat    = 70000           deltavsat= 0.2             ksativ  = 2
+mexp    = 4               ptwg    = 30              pclm    = 0.05            pclmg   = 0
+pdibl1  = 0               pdibl2  = 0.002           drout   = 1               pvag    = 0
+fpitch  = 2.7e-008        rth0    = 0.225           cth0    = 1.243e-006      wth0    = 2.6e-007
+lcdscd  = 5e-005          lcdscdr = 5e-005          lrdsw   = 0.2             lvsat   = 0
************************************************************
*                         leakage                          *
************************************************************
+aigc    = 0.014           bigc    = 0.005           cigc    = 0.25            dlcigs  = 1e-009
+dlcigd  = 1e-009          aigs    = 0.0115          aigd    = 0.0115          bigs    = 0.00332
+bigd    = 0.00332         cigs    = 0.35            cigd    = 0.35            poxedge = 1.1
+agidl   = 1e-012          agisl   = 1e-012          bgidl   = 10000000        bgisl   = 10000000
+egidl   = 0.35            egisl   = 0.35
************************************************************
*                            rf                            *
************************************************************
************************************************************
*                         junction                         *
************************************************************
************************************************************
*                       capacitance                        *
************************************************************
+cfs     = 0               cfd     = 0               cgso    = 1.6e-010        cgdo    = 1.6e-010
+cgsl    = 0               cgdl    = 0               ckappas = 0.6             ckappad = 0.6
+cgbo    = 0               cgbl    = 0
************************************************************
*                       temperature                        *
************************************************************
+tbgasub = 0.000473        tbgbsub = 636             kt1     = 0               kt1l    = 0
+ute     = -0.7            utl     = 0               ua1     = 0.001032        ud1     = 0
+ucste   = -0.004775       at      = 0.001           ptwgt   = 0.004           tmexp   = 0
+prt     = 0               tgidl   = -0.007          igt     = 2.5
************************************************************
*                          noise                           *
************************************************************
**)
.control
pre_osdi /home/vsduser/Desktop/asap_7nm_Xschem/bsimcmg.osdi
.endc


**** end user architecture code
.end

```

<img width="1697" height="1016" alt="image" src="https://github.com/user-attachments/assets/17a79674-d97b-4a8a-9f83-64d005d25750" />


``` ngspice output

v_th = 3.453099e-01
max_gain = 6.419967e+00
vil = 3.492708e-01
voh = 3.200718e-01
vih = 3.516842e-01
vol = 3.045787e-01
nmh = -3.16124e-02
nml = 4.469210e-02
gm_max              =  1.237678e-03 at=  4.260000e-01
Doing analysis at TEMP = 27.000000 and TNOM = 27.000000

Using SPARSE 1.3 as Direct Linear Solver

Initial Transient Solution
--------------------------

Node                                   Voltage
----                                   -------
nfet_out                              0.700646
nfet_in                                      0
vdd                                      0.701
v2#branch                         -8.09446e-07
v1#branch                          7.22565e-12

 Reference value :  4.75000e-11
No. of Data Rows : 120
tpr                 =  2.499287e-11
tpf                 =  2.560584e-11
id_pwr              =  -1.70088e-15 from=  2.00000e-11 to=  6.00000e-11
tpr = 2.499287e-11
tpf = 2.560584e-11
tp = 2.529935e-11
id_pwr = -1.70088e-15
pwr = -1.19062e-15
power = 2.976538e-05
Doing analysis at TEMP = 27.000000 and TNOM = 27.000000

Using SPARSE 1.3 as Direct Linear Solver

Initial Transient Solution
--------------------------

Node                                   Voltage
----                                   -------
nfet_out                              0.700646
nfet_in                                      0
vdd                                      0.701
v2#branch                         -8.09446e-07
v1#branch                          7.22565e-12


No. of Data Rows : 71
tr                  =  2.099857e-11
tf                  =  2.352563e-11
t_delay = 4.452420e-11
f = 2.245970e+10


```

v2#branch = Id

&nbsp;

<img width="1697" height="1016" alt="image" src="https://github.com/user-attachments/assets/a6fbca6d-9a9f-4839-83fd-15c2bf265aad" />


&nbsp;

### Characteristics Table 

&nbsp;

<ins>**increasing fins of pmos (10-20), constant fins for nmos of 14**</ins>

&nbsp;

| S.No	| W (nm) pmos 	| 	L (nm) pmos	| 	W/L (PMOS) | W (nm) nmos	| L (nm) nmos | W/L (NMOS)	| Vth (V)		| Id (A)		| nml (V)	| nmh (V)	| P (W)			| tpd (ps)	| Av		| f (Hz) 	  | 
|-------|---------------|---------------|--------------|----------------|-------------|-------------|---------------|---------------|-----------|-----------|---------------|-----------|-----------|-------------|
| 1		| 10			| 7				| 1,429		   | 14				| 7			  | 2,000		| 0,3220123		| 8,09118E-07	| 0,03700	| -0,02448	| 2,50431E-05	| 25,06941	| 6,473756	| 2,25905E+10 | 
| 2		| 12			| 7				| 1,714		   | 14				| 7			  | 2,000		| 0,3346122		| 8,09309E-07	| 0,04110	| -0,28558	| 2,75591E-05	| 25,18736	| 6,434344	| 2,25293E+10 | 
| 3		| 14			| 7				| 2,000		   | 14				| 7			  | 2,000		| 0,3453099		| 8,09446E-07	| 0,44692	| -0,31612	| 2,97654E-05	| 25,299	| 6,419967	| 2,24597E+10 |
| 4		| 16			| 7				| 2,286		   | 14				| 7			  | 2,000		| 0,3545648		| 8,09549E-07	| 0,46864	| -0,03439	| 3,17374E-05	| 25,37817	| 6,422362	| 2,23841E+10 |
| 5		| 18			| 7				| 2,571		   | 14				| 7			  | 2,000		| 0,3626907		| 8,09629E-07	| 0,04956	| -0,03630	| 3,35045E-05	| 25,44186	| 6,432083	| 2,23042E+10 |
| 6		| 20			| 7				| 2,857		   | 14				| 7			  | 2,000		| 0,3699111		| 8,09694E-07	| 0,05111	| -0,03850	| 3,51162E-05	| 25,49867	| 6,449714	| 2,22214E+10 |

&nbsp;

findings: if we increas pmos fins and we keep nmos fins constant at 14: Vth increase, Id keep quite stable, , Power & tpd increase and frequence go down.

<ins>**increasing fins of nmos (10-20), constant fins of pmos of 14**</ins>

&nbsp;

| S.No	| W (nm) pmos 	| 	L (nm) pmos	| 	W/L (PMOS) | W (nm) nmos	| L (nm) nmos | W/L (NMOS)	| Vth (V)	| Id (A)		| nml (V)	| nmh (V)	| P (W)			| tpd (ps)	| Av		| f (Hz) 	  | 
|-------|---------------|---------------|--------------|----------------|-------------|-------------|-----------|---------------|-----------|-----------|---------------|-----------|-----------|-------------|
| 1		| 14			| 7				| 2,000		   | 10				|7			  | 1,429		| 0,3685305	| 5,78344E-07	| 0,03783	| -0,05105	| 2,48615E-05	| 25,48768	| 6,445127	| 2,22381E+10 | 
| 2		| 14			| 7				| 2,000		   | 12				|7			  | 1,714		| 0,3559913	| 6,93912E-07	| 0,04770	| -0,03482	| 2,74556E-05	| 25,38955	| 6,422871	| 2,23711E+10 | 
| 3		| 14			| 7				| 2,000		   | 14				|7			  | 2,000		| 0,3453099	| 8,09446E-07	| 0,04469	| -0,03161	| 2,97654E-05	| 25,29935	| 6,419967	| 2,24597E+10 | 
| 4		| 14			| 7				| 2,000		   | 16				|7			  | 2,286		| 0,3360427	| 9,24947E-07	| 0,04198	| -0,02951	| 3,18280E-05	| 25,20275	| 6,431967	| 2,25210E+10 | 
| 5		| 14			| 7				| 2,000		   | 18				|7			  | 2,571		| 0,3278853	| 1,04041E-06	| 0,03897	| -0,02648	| 3,36956E-05	| 25,12086	| 6,452074	| 2,25641E+10 | 
| 6		| 14			| 7				| 2,000		   | 20				|7			  | 2,857		| 0,3206226	| 1,15585E-06	| 0,03704	| -0,02463	| 3,53859E-05	| 25,05804	| 6,479507	| 2,25962E+10 | 

&nbsp;

findings: if we increase nmos fins and keep pmos fins constant at 14: Vth go don with increasing fin's, Id & Power grow, frequency increas a bit, tpd go down 

&nbsp;

<ins>**increasing fins for pmos (10-20), increasing fins (10-20) for nmos**</ins>

&nbsp;

| S.No	| W (nm) pmos 	| 	L (nm) pmos	| 	W/L (PMOS) | W (nm) nmos	| L (nm) nmos | W/L (NMOS)	| Vth (V)	| Id (A)		| nml (V)	| nmh (V)	| P (W)			| tpd (ps)	| Av		| f (Hz) 	  | 
|-------|---------------|---------------|--------------|----------------|-------------|-------------|-----------|---------------|-----------|-----------|---------------|-----------|-----------|-------------|
| 1		| 10			| 7				| 1,429		   | 10			    | 7			  | 1,429		| 0,3453099	| 5,78176E-07	| 0,04469	| -0,03161	| 2,12610E-05	| 25,29935	| 6,419967	| 2,24597E+10| 
| 2		| 12			| 7				| 1,714		   | 12			    | 7			  | 1,714		| 0,3453099	| 6,93811E-07	| 0,04469	| -0,03161	| 2,55132E-05	| 25,29935	| 6,419967	| 2,24597E+10| 
| 3		| 14			| 7				| 2,000		   | 14			    | 7			  | 2,000		| 0,3453099	| 8,09446E-07	| 0,04469	| -0,03161	| 2,97654E-05	| 25,29935	| 6,419967	| 2,24597E+10| 
| 4		| 16			| 7				| 2,286		   | 16			    | 7			  | 2,286		| 0,3453099	| 9,25081E-07	| 0,04469	| -0,03161	| 3,40176E-05	| 25,29935	| 6,419967	| 2,24597E+10| 
| 5		| 18			| 7				| 2,571		   | 18			    | 7			  | 2,571		| 0,3453099	| 1,04072E-06	| 0,04469	| -0,03161	| 3,82698E-05	| 25,29935	| 6,419967	| 2,24597E+10| 
| 6		| 20			| 7				| 2,857		   | 20			    | 7			  | 2,857		| 0,3453099	| 1,15635E-06	| 0,04469	| -0,03161	| 4,25220E-05	| 2,53E-11	| 6,419967	| 2,24597E+10| 

&nbsp;

findings: if fins of pmos & nmos increase Id & P increase, other characteristics keep constant!

</details>

---------------------------------------------------------------------------------------
## Designing Bandgap References Using 7nm FinFETs
<details>
<summary>Designing Bandgap References Using 7nm FinFETs</summary>

### 17. Introduction To Bandgap


### 18. Bandgap Component Placement Using Xschem


### 19. Bandgap Circuit Wiring Using Xschem


### 20. Bandgap Circuit Final Simulations


### 21. Assignment



</details>

-------------------------------------------------------------------------------------
### used Tools

<details>
<summary>xschem</summary>
	
&nbsp;

Overview
&nbsp;

Xschem is primarily an analog/mixed‑signal schematic capture tool with tight SPICE integration. In digital contexts it is most valuable for transistor‑level design, mixed‑signal blocks, timing/power analysis, and custom cell development rather than replacing RTL/logic simulators.

When Xschem makes sense for digital work
- Transistor‑level design of standard cells, I/O pads, level shifters, sense amplifiers, SRAM bitcells.
- Analog/mixed‑signal IP inside a digital SoC (PLL, ADC/DAC front‑ends, on‑chip regulators, clock drivers).
- Timing, power, and signal‑integrity verification at transistor level (rise/fall, short‑circuit current, dynamic power).
- Rapid schematic editing and parameter sweeps for device sizing and corner analysis before layout.

Typical workflow in a digital environment
1. Capture transistor‑level schematics for cells or blocks in Xschem using hierarchical sheets and parameterized symbols.
2. Attach device models (BSIM, custom MOS, passive models) and set corners.
3. Generate SPICE netlists and run simulations (ngspice, Xyce, or other SPICE engine) to obtain timing, power, and margin data.
4. Use behavioral models (Verilog‑A/Verilog‑AMS) or mixed‑signal co‑simulation where interaction with RTL or digital testbenches is required — tool support varies by simulator.
5. Export netlists for layout/LVS and hand off verified transistor netlists to downstream physical design teams.

Integration and toolchain points
- SPICE engines: ngspice, Xyce, commercial SPICE — choose based on Verilog‑A/AMS and performance needs.
- Co‑simulation: use Verilog‑AMS / Verilog‑A or a mixed‑signal co‑simulator for interaction with RTL; verify compatibility between your SPICE engine and AMS support.
- Version control: Xschem’s text‑based symbols and schematics fit well into Git for library and cell management.
- Layout handoff: Xschem produces SPICE/subcircuit netlists used by layout/LVS flows, but additional script/tooling may be needed to generate cell abstracts, LEF, or integration with place‑and‑route flows.

Strengths for digital teams
- Precise transistor‑level control and fast iteration on device sizing and corners.
- Lightweight, scriptable files that support automated regression simulations and CI.
- Good for mixed‑signal verification where analog effects matter to digital behaviour (IOs, clock drivers, power domains).

Limitations & risks
- Not a substitute for RTL design/verification (Verilog/VHDL) or digital logic simulators — functional digital verification must remain in HDL toolchains.
- Mixed‑signal co‑simulation capability depends on SPICE engine (Verilog‑AMS/Verilog‑A support is inconsistent across open tools).
- Downstream EDA integration (LEF/DEF, place‑and‑route automation) is not native — expect custom conversion scripts and engineering effort.
- Platform and support: Linux‑centric with limited commercial support; requires in‑house expertise.

Cost/effort considerations
- Low licensing cost, but expect nontrivial investment for:
  - Toolchain integration (co‑simulators, conversion scripts)
  - Library creation and validation (standard cell libraries, models)
  - Training for transistor‑level workflows and mixed‑signal verification

Recommended pilot (4–8 weeks)
- Scope: implement and validate a small set of representative items (e.g., 6 standard cells + one I/O pad or clock buffer).
- Tasks: create Xschem schematics, run corner SPICE sims (timing/power), run at least one mixed‑signal co‑simulation with a simple RTL testbench (if required), export netlists for layout/LVS.
- Metrics: time to first successful transistor‑level simulation, accuracy of timing/power vs. baseline, effort to integrate netlists into existing flows, and engineer feedback on usability.
- Acceptance: pilot completes on schedule, simulations meet accuracy thresholds vs. baseline, and integration scripts reduce manual handoffs.

Recommendations
- Use Xschem for transistor‑level and mixed‑signal blocks where analog effects impact digital function.
- Continue using RTL/logic toolchain for functional digital verification; adopt co‑simulation only where necessary.
- Plan for initial integration effort (scripts, simulator selection, training) and run a focused pilot before wider adoption.

</details>

<details>
<summary>ngspice</summary>
	
&nbsp;

Overview
&nbsp;
ngspice is a widely used open‑source SPICE-compatible circuit simulator for analog, mixed‑signal and basic digital verification. It provides command‑line and batch operation, interactive waveform plotting, behavioural sources, device model support, and scripting for automated flows. It is commonly used on Linux and can be run on Windows/macOS via ports or compatibility layers.

Strategic value
- Enables in‑house circuit simulation without license fees, lowering cost of entry and supporting reproducible, version‑controlled analog and mixed‑signal verification flows.
- Useful for transistor‑level validation (standard cells, I/O circuits), analog IP development, and regression testing in CI pipelines.

Key benefits
- Cost: no per‑seat licensing costs; suitable for teams needing many simulation instances.
- Openness & integration: text‑based netlists and outputs integrate well with front‑ends (Xschem, KiCad), automated scripts, and version control.
- Automation: robust batch and scripting capabilities for regression, parameter sweeps and CI.
- Feature set: supports standard SPICE elements, behavioural B‑sources, parameterized devices and transient/AC/DC/noise analyses; built‑in plotting and data export (raw files).
- Community & portability: active user community, frequent updates, runs on common server/CI environments.

Limitations & risks
- Performance & scalability: for very large circuits or high‑performance requirements, commercial simulators (and specialized tools like Xyce) may be faster or more scalable.
- Advanced AMS support: support for Verilog‑A/Verilog‑AMS and some advanced device model dialects can be limited or require additional tooling; complex mixed‑signal co‑simulation needs careful validation.
- PDK compatibility: foundry PDKs and some commercial models may be tuned for specific commercial SPICE variants — validate model compatibility and accuracy before production use.
- Support model: community and internal expertise drive support; no guaranteed commercial SLA unless paired with third‑party support arrangements.
- Platform nuances: Windows/macOS use typically requires extra setup (WSL/Cygwin/ports), adding initial effort for non‑Linux teams.

Cost/effort considerations
- Low direct software cost, but expect investment in:
  - Validation of models vs. baseline commercial simulators (accuracy tests).
  - Toolchain integration (front‑end, CI, waveform tools).
  - Training for engineers on ngspice quirks, scripting, and batch jobs.
  - Potential development of adapters/automation for PDK or layout handoffs.

Recommended pilot (4–8 weeks)
- Scope: validate ngspice on representative use cases — e.g., a set of standard cells, an I/O buffer, and one mixed‑signal block.
- Tasks:
  1. Install and standardize a stable ngspice version on CI servers.
  2. Import device models (BSIM/custom models) and run baseline comparisons against a reference simulator on a small set of circuits.
  3. Create scripted regression tests (transient, AC, DC, noise) and waveform extraction (.measure).
  4. Integrate with schematic front‑end (Xschem/KiCad) and automate netlist generation.
  5. Measure runtime, accuracy and stability across corners and temperatures.
- Metrics:
  - Simulation accuracy vs. reference (acceptable delta on key metrics).
  - Throughput: runtime for representative jobs and CI load capacity.
  - Integration effort (time to automate netlist → run → report).
  - User feedback on usability and debugging.

Success criteria
- ngspice reproduces key electrical metrics within agreed tolerances versus baseline tools.
- Regression tests run automatically and reliably in CI with acceptable runtime.
- Models and PDK files are compatible or have a documented path to compatibility.
- Team confidence and a documented support/rollback plan if specific jobs require commercial tools.

Recommendations / next steps
- Start with a focused pilot as above; include at least one mixed‑signal co‑simulation if your designs need it.
- Build a model validation suite (unit circuits, corners, temp) to compare against reference results.
- Automate simulation workflows and store netlists/results in version control and CI.
- Define escalation: when to use commercial simulators (e.g., failing accuracy or performance thresholds).
- If needed, evaluate third‑party commercial support or a hybrid flow (ngspice for regression, commercial tools for sign‑off).

</details>

-------------------------------------------------------------------------------------
### Acknowledgments

- #### Kunal Ghosh, Director, VSD Corp. Pvt. Ltd.
- #### Soundarya Madhuri Royyuru, Teaching Assistant


 
